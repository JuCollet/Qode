"use strict";angular.module("mobile",["ionic"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("app",{url:"/app",abstract:!0,templateUrl:"templates/menu.html",controller:""}).state("app.search",{url:"/search",views:{menuContent:{templateUrl:"templates/search.html",controller:"SearchController"}}}).state("app.favorites",{url:"/favorites",views:{menuContent:{templateUrl:"templates/favorites.html"}}}).state("app.login",{url:"/login",views:{menuContent:{templateUrl:"templates/login.html"}}}).state("app.myqodes",{url:"/myqodes",views:{menuContent:{templateUrl:"templates/myqodes.html"}}}).state("app.qodeview",{url:"/qodeview/:id",views:{menuContent:{templateUrl:"templates/qodeview.html",controller:"QodeViewController"}}}).state("app.register",{url:"/register",views:{menuContent:{templateUrl:"templates/register.html"}}}),t.otherwise("/app/search")}]),angular.module("mobile").factory("userFactory",["$http",function(e){return{getUser:function(){return e.get("/user")},addToFavorites:function(){return e.put("/user/addtofavorites")},deleteQode:function(){return e.delete("/user/deleteqode/:qodeId")},isLogged:function(){return e.get("/user/isLogged")},login:function(){return e.post("/user/login")},logout:function(){return e.get("/user/logout")},recovery:function(){return e.post("/user/passwordrecovery")},register:function(){return e.post("/user")},reset:function(){return e.put("/user")},removeFromFavorites:function(){return e.put("/user/removefromfavorites")}}}]).factory("qodeFactory",["$http",function(e){return{getQode:function(){return e.get("/api/qodes/:id")}}}]),angular.module("mobile").factory("qodeFactory",["$http",function(e){return{getQode:function(t){return e.get("/api/qodes/"+t)}}}]),angular.module("mobile").controller("AppController",["$scope","$rootScope","userFactory","qodeFactory",function(e,t,o,r){t.logged={log:!1,name:""},o.isLogged().then(function(e){void 0!==e.data.isLogged&&!0===e.data.isLogged.log?(t.logged.log=!0,t.logged.name=e.data.isLogged.name):t.logged.log=!1},function(e){if(e)throw e})}]),angular.module("mobile").controller("QodeViewController",["$scope","$stateParams","qodeFactory",function(e,t,o){o.getQode(t.id).then(function(t){e.qode=t.data},function(e){console.log(e)})}]),angular.module("mobile").controller("SearchController",["$scope","$stateParams","qodeFactory","$state","$timeout",function(e,t,o,r,n){var a=document.decode.char1,u=document.decode.char2,l=document.decode.char3,s=document.decode.char4,i=document.decode.char5,c=function(){a.value="",u.value="",l.value="",s.value="",i.value=""};e.jumpnext=function(e){switch($("#status").html("&nbsp;"),e){case 1:u.focus();break;case 2:l.focus();break;case 3:s.focus();break;case 4:i.focus();break;case 5:if(""!==a.value&&""!==u.value&&""!==l.value&&""!==s.value&&""!==i.value){$("#status").html('<i class="fa fa-refresh fa-spin"></i>&nbsp;&nbsp;Searching...');var t=a.value+u.value+l.value+s.value+i.value;o.getQode(t).then(function(e){document.activeElement.blur(),$("#status").html('<i class="fa fa-check is-green"></i>&nbsp;&nbsp;Found'),c(),n(function(){r.go("app.qodeview",{id:t})},500)},function(e){$("#status").html('<i class="fa fa-times is-red"></i>&nbsp;&nbsp;'+e.statusText+" :("),document.activeElement.blur(),c()})}else c(),document.activeElement.blur()}}}]);